<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.Spinner?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<VBox spacing="20.0" styleClass="dialog-container" stylesheets="@../../styles/dialogs.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.lms.controller.dialogs.IssueLoanDialogController">
   
   <!-- Dialog Header -->
   <HBox alignment="CENTER_LEFT" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="60.0" prefHeight="40.0" prefWidth="800.0" spacing="15.0" styleClass="dialog-header">
      <children>
         <Label styleClass="dialog-icon" text="âž•" />
         <VBox>
            <children>
               <Label styleClass="dialog-title" text="Issue New Loan" />
            </children>
         </VBox>
      </children>
   </HBox>
   
   <!-- Form Content -->
   <VBox spacing="20.0" styleClass="dialog-content">
      <children>
         
         <!-- Member Selection -->
         <VBox spacing="8.0">
            <children>
               <Label styleClass="form-label" text="Select Member *" />
               <ComboBox fx:id="memberCombo" prefWidth="400.0" promptText="Choose a member..." styleClass="dialog-combo" />
               <Label fx:id="memberInfoLabel" styleClass="info-label" />
            </children>
         </VBox>
         
         <!-- Book Selection -->
         <VBox spacing="8.0">
            <children>
               <Label styleClass="form-label" text="Select Book *" />
               <ComboBox fx:id="bookCombo" prefWidth="400.0" promptText="Choose an available book..." styleClass="dialog-combo" />
               <Label fx:id="bookInfoLabel" styleClass="info-label" />
            </children>
         </VBox>
         
         <!-- Date Selection Row -->
         <HBox spacing="20.0">
            <children>
               <!-- Issue Date -->
               <VBox spacing="8.0" HBox.hgrow="ALWAYS">
                  <children>
                     <Label styleClass="form-label" text="Issue Date *" />
                     <DatePicker fx:id="issueDatePicker" blendMode="OVERLAY" prefWidth="180.0" styleClass="dialog-date-picker" />
                  </children>
               </VBox>
               
               <!-- Return Date -->
               <VBox spacing="8.0" HBox.hgrow="ALWAYS">
                  <children>
                     <Label styleClass="form-label" text="Return Date *" />
                     <DatePicker fx:id="returnDatePicker" blendMode="OVERLAY" prefWidth="180.0" styleClass="dialog-date-picker" />
                  </children>
               </VBox>
            </children>
         </HBox>
         
         <!-- Loan Period -->
         <VBox spacing="8.0">
            <children>
               <Label styleClass="form-label" text="Loan Period (Days) *" />
               <HBox alignment="CENTER_LEFT" spacing="10.0">
                  <children>
                     <Spinner fx:id="loanPeriodSpinner" blendMode="OVERLAY" prefWidth="100.0" styleClass="dialog-spinner" />
                     <Label styleClass="field-description" text="Standard loan period is 14 days" textFill="#e8e8e8" />
                  </children>
               </HBox>
            </children>
         </VBox>
         
         <!-- Notes -->
         <VBox spacing="8.0">
            <children>
               <Label styleClass="form-label" text="Notes (Optional)" />
               <TextArea fx:id="notesArea" blendMode="OVERLAY" prefHeight="80.0" prefWidth="400.0" promptText="Enter any additional notes about this loan..." styleClass="dialog-textarea" wrapText="true" />
            </children>
         </VBox>
         
      </children>
   </VBox>
   
   <!-- Dialog Buttons -->
  <VBox spacing="5.0">
         <children>
            <Label styleClass="required-note" text="* Required fields">
               <VBox.margin>
                  <Insets left="40.0" />
               </VBox.margin>
            </Label>
            <Separator prefWidth="200.0" />
            <HBox alignment="CENTER_RIGHT" spacing="15.0" styleClass="dialog-buttons">
               <children>
                  <Button fx:id="issueButton" minHeight="-Infinity" mnemonicParsing="false" onAction="#handleIssue" prefHeight="36.0" styleClass="btn-primary" text="Issue Loan" />
                  <Button fx:id="cancelButton" mnemonicParsing="false" onAction="#handleCancel" styleClass="btn-secondary" text="Cancel" />
               </children>
               <padding>
                  <Insets bottom="20.0" left="20.0" right="20.0" top="10.0" />
               </padding>
            </HBox>
         </children>
      </VBox>
   
   
   <padding>
      <Insets bottom="25.0" left="25.0" right="25.0" top="25.0" />
   </padding>
</VBox>
